
name: Build Project

on: workflow_dispatch

env:
    outputZipfile: /tmp/terminal_radio.tar.xz

jobs:
    build-project:
        runs-on: ubuntu-latest

        steps:
          - name: Step 1 - Checkout Repository
            uses: actions/checkout@v4

          - name: Step 2 - Install Build Dependencies
            run: |
                apt update
                apt install -y sqlite3

          - name: Step 3 - Install Python Dependencies
            run: |
                python3 -m venv .venv
                .venv/bin/pip3 install -r requirements.txt

          - name: Step 4 - Create Directories
            run: mkdir logs/

          - name: Step 5 - Create Database
            run: sqlite3 resource/radio_sources.sqlite <resource/schema.sql

          - name: Step 6 - Zip Project
            run: tar --exclude tests/ -czf ${{env.outputZipfile}} .

          - name: Step 7 - Create Artifact
            uses: actions/upload-artifact@v4.6.2
            with:
                name: archiveFolder
                path: ${{env.outputZipfile}}